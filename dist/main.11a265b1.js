parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"6KIz":[function(require,module,exports) {
"use strict";var e=document.documentElement,t=document.querySelector(".game_score"),r=document.querySelector(".game_best"),n=document.querySelector(".info"),o=document.querySelector(".button, .start"),a=document.querySelector(".message_start"),c=document.querySelector(".message_win"),i=document.querySelector(".message_lose"),f=document.querySelectorAll(".field_cell"),l=0,u=0,s=null,d=null,m=null,v=3,h=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return f[4*e+t]}function b(){for(var e=h.some(function(e){return e.includes(0)}),t=null,r=null,n=1;n<=v;n++)for(var o=0;o<=v;o++)h[n][o]===h[n-1][o]&&(t=!0);for(var a=0;a<=v;a++)for(var c=1;c<=v;c++)h[a][c]===h[a][c-1]&&(r=!0);return e||t||r}function g(){if(b())for(var e=Math.random(),t=null,r=Math.round(3*Math.random()+0),n=Math.round(3*Math.random()+0),o=0;o<=100;o++){if(0===h[r][n]){t=e>.1?2:4,h[r][n]=t,k(r,n).textContent=t,k(r,n).classList.add("field_cell--".concat(t));break}e=Math.random(),r=Math.round(3*Math.random()+0),n=Math.round(3*Math.random()+0)}if(!b())return i.classList.remove("hidden");m=null}function L(){window.setTimeout(g,200),m=null}function _(e,t){if(h[e][t]>0)for(var r=2;r<=2048;r*=2)if(r===h[e][t]){k(e,t).classList.add("field_cell--".concat(r));break}return f}function w(e,t){if(h[e][t]>0){for(var r=[],n=2;n<=2048;n*=2)k(e,t).classList.contains("field_cell--".concat(n))&&r.push("field_cell--".concat(n));r.map(function(r){return k(e,t).classList.remove(r)})}return f}function y(e,n,o,a){a?(h[n][o]=s+a,l+=h[n][o],t.textContent=l,u<l&&(u=l),r.textContent=u,h[n][o]>=2048&&c.classList.remove("hidden")):h[n][o]=s,"r"===e?(k(n,o).textContent=h[d][o],_(n,o)):(k(n,o).textContent=h[n][d],_(n,o))}function M(e,t){w(e,t),h[e][t]=0,k(e,t).textContent=""}function x(){for(var e=0;e<h.length;e++)for(var t=0;t<h[e].length;t++)if(0!==h[e][t]&&0!==e){s=h[e][t];for(var r=e-1;r>=0;){if(0===h[r][t]){if(0!==r){r--;continue}m=!0,y("r",d=r,t),M(e,t);break}if(h[r][t]===s){m=!0,y("r",d=r,t,s),M(e,t);break}if(h[r][t]>0){d=r+1,e-r>1&&(m=!0,y("r",d,t),M(e,t)),y("r",d,t);break}}}m&&L()}function C(){for(var e=h.length-1;e>=0;e--)for(var t=0;t<h.length;t++)if(0!==h[e][t]&&3!==e){s=h[e][t];for(var r=e+1;r<=h.length;){if(0===h[r][t]){if(3!==r){r++;continue}m=!0,y("r",d=r,t),M(e,t);break}if(h[r][t]===s){m=!0,y("r",d=r,t,s),M(e,t);break}if(h[r][t]>0){d=r-1,r-e>1&&(m=!0,y("r",d,t),M(e,t));break}}}m&&L()}function p(){for(var e=0;e<h.length;e++)for(var t=h[e].length-1;t>=0;t--)if(0!==h[e][t]&&3!==t){s=h[e][t];for(var r=t+1;r<=3;){if(0===h[e][r]){if(3!==r){r++;continue}m=!0,y("c",e,d=r),M(e,t);break}if(h[e][r]===s){m=!0,y("c",e,d=r,s),M(e,t);break}if(h[e][r]>0){d=r-1,r-t>1&&(m=!0,y("c",e,d),M(e,t));break}}}m&&L()}function q(){for(var e=0;e<h.length;e++)for(var t=0;t<h[e].length;t++)if(0!==h[e][t]&&0!==t){s=h[e][t];for(var r=t-1;r>=0;){if(0===h[e][r]){if(0!==r){r--;continue}m=!0,y("c",e,d=r),M(e,t);break}if(h[e][r]===s){m=!0,y("c",e,d=r,s),M(e,t);break}if(h[e][r]>0){d=r+1,t-r>1&&(m=!0,y("c",e,d),M(e,t));break}}}m&&L()}o.addEventListener("click",function(){if(o.classList.contains("start"))o.classList.remove("start"),o.classList.add("restart"),o.textContent="Restart",a.classList.add("hidden"),g(),g(),n.classList.add("active");else{t.textContent=0,l=0,i.classList.add("hidden");for(var e=[],r=2;r<=2048;r*=2)e.push("field_cell--".concat(r));f.forEach(function(t){return t.textContent="",e.map(function(e){return t.classList.remove(e)}),t}),h=h.map(function(e){return e.map(function(){return 0})}),g(),g()}}),e.addEventListener("keydown",function(e){e.preventDefault();var t=e.key;switch(!0){case"ArrowUp"===t:x();break;case"ArrowDown"===t:C();break;case"ArrowRight"===t:p();break;case"ArrowLeft"===t:q()}});
},{}]},{},["6KIz"], null)
//# sourceMappingURL=main.11a265b1.js.map